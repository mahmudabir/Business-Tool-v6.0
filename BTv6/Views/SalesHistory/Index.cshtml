@if ((int)Session["SID"] == 1)
{
    @RenderPage("~/Views/Admin/Common.cshtml")
}
@if ((int)Session["SID"] == 2)
{
    @RenderPage("~/Views/Manager/Common.cshtml")
}
@if ((int)Session["SID"] == 3)
{
    @RenderPage("~/Views/Salesman/Common.cshtml")
}
@model List<BTv6.Models.sale>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.$i">
    <title>Sales History</title>
    <link rel="stylesheet" type="text/css" href="~/Assets/css/history.css">
    <script src="~/Assets/js/pdfPrint.js"></script>
    <script src="~/Assets/js/excelPrint.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <div class="table">
        <h1>Sales History</h1>
        <input style="width:15%;margin-left:10px" type="text" name="txtsearch" id="txtsearch" value="" />
        <input style="margin-top: 5px;margin-left: 14px;" name="PRINT" id="PRINT" onclick="savePDF()" type="submit" value="Export PDF">
        <input style="margin-top: 5px;margin-left: 14px;" type="submit" name="excel" onclick="exportToExcel('tblexportData', 'user-data')" value="Export Excel">
        <div class=tab1 id="table">
            <table class="content-table" id="tblexportData" border="1">
                <thead>
                    <tr>
                        <th>SLID</th>
                        <th>PID</th>
                        <th>QUANT</th>
                        <th>OB_AMMOUNT</th>
                        <th>PROFIT</th>
                        <th>C_NAME</th>
                        <th>C_MOB</th>
                        <th>SOLD_BY</th>
                        <th>Sell_SDate</th>
                    </tr>
                </thead>
                <tbody id="">
                    @if (Model.Count > 0)

                    {
                        foreach (var sale in Model)
                        {
                            <tr>
                                <td>@sale.SLID</td>
                                <td>@sale.PID</td>
                                <td>@sale.QUANT</td>
                                <td>@sale.OB_AMMOUNT</td>
                                <td>@sale.PROFIT</td>
                                <td>@sale.C_NAME</td>
                                <td>@sale.C_MOB</td>
                                <td>@sale.SOLD_BY</td>
                                <td>@sale.Sell_SDate</td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="9" align="center">NO DATA</td>
                        </tr>
                    }
                </tbody>

            </table>
        </div>
        <hr>


    </div>
    @*Ajax Search*@
    <script>
        $("#txtsearch").on("keyup", function () {
            var txtenter = $(this).val();
            $("table tr").each(function (results) {
                if (results !== 0)
                {
                    var id = $(this).find("td:nth-child(1)").text();
                    var id1 = $(this).find("td:nth-child(2)").text();
                    var id2 = $(this).find("td:nth-child(3)").text();
                    var id3 = $(this).find("td:nth-child(4)").text();
                    var id4 = $(this).find("td:nth-child(5)").text();
                    var id5 = $(this).find("td:nth-child(6)").text();
                    var id6 = $(this).find("td:nth-child(7)").text();
                    var id7 = $(this).find("td:nth-child(8)").text();
                    var id8 = $(this).find("td:nth-child(9)").text();
                    var ex = id.indexOf(txtenter) !== 0 && id.toLowerCase().indexOf(txtenter.toLowerCase());
                    var ex1 = id1.indexOf(txtenter) !== 0 && id1.toLowerCase().indexOf(txtenter.toLowerCase());
                    var ex2 = id2.indexOf(txtenter) !== 0 && id2.toLowerCase().indexOf(txtenter.toLowerCase());
                    var ex3 = id3.indexOf(txtenter) !== 0 && id3.toLowerCase().indexOf(txtenter.toLowerCase());
                    var ex4 = id4.indexOf(txtenter) !== 0 && id4.toLowerCase().indexOf(txtenter.toLowerCase());
                    var ex5 = id5.indexOf(txtenter) !== 0 && id5.toLowerCase().indexOf(txtenter.toLowerCase());
                    var ex6 = id6.indexOf(txtenter) !== 0 && id6.toLowerCase().indexOf(txtenter.toLowerCase());
                    var ex7 = id7.indexOf(txtenter) !== 0 && id7.toLowerCase().indexOf(txtenter.toLowerCase());
                    var ex8 = id8.indexOf(txtenter) !== 0 && id8.toLowerCase().indexOf(txtenter.toLowerCase());
                    if (ex < 0 && ex1 < 0 && ex2 < 0 && ex3 < 0 && ex4 < 0 && ex5 < 0 && ex6 < 0 && ex7 < 0 && ex8 < 0) {
                        $(this).hide();
                    }
                    else {
                        $(this).show();
                    }
                }
                })
        })
    </script>
</body>
</html>
